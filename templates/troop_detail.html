{% extends "base.html" %}

{% block title %}{{ troop.name }} - Bannerlord Database{% endblock %}

{% block content %}
<h2>{{ troop.name }}</h2>

<div class="troop-info">
    <p><strong>Faction:</strong> {{ troop.culture_name }}</p>
    <p><strong>Tier:</strong> {{ troop.tier }}</p>
    <p><strong>Wage:</strong> {{ troop.wage }} denars/day</p>
    <p><strong>Type:</strong> {{ 'Mounted' if troop.is_mounted else 'Infantry' }}</p>
</div>

{% if equipment %}
<h3>Equipment</h3>
<div class="equipment-section">
    <table class="equipment-table">
        <thead>
            <tr>
                <th>Slot</th>
                <th>Items</th>
            </tr>
        </thead>
        <tbody>
            {% for slot, items in equipment.items() %}
            <tr>
                <td class="equipment-slot">{{ slot|replace('_', ' ')|title }}</td>
                <td class="equipment-items">
                    {% for item in items %}
                        <span class="equipment-item">{{ item.item_name }}</span>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<h3>Equipment</h3>
<p><em>No equipment data available for this troop.</em></p>
{% endif %}

{% if prerequisites %}
<h3>Upgrades From:</h3>
<ul>
    {% for prereq in prerequisites %}
    <li>
        <a href="{{ url_for('troop_detail', troop_id=prereq.troop_id) }}">
            {{ prereq.name }}
        </a>
        ({{ prereq.xp_cost }} XP required)
    </li>
    {% endfor %}
</ul>
{% endif %}

{% if upgrades %}
<h3>Can Upgrade To:</h3>
<ul>
    {% for upgrade in upgrades %}
    <li>
        <a href="{{ url_for('troop_detail', troop_id=upgrade.troop_id) }}">
            {{ upgrade.name }}
        </a>
        ({{ upgrade.xp_cost }} XP required)
    </li>
    {% endfor %}
</ul>
{% endif %}

<a href="{{ url_for('troops') }}" class="btn">‚Üê Back to All Troops</a>
{% endblock %}